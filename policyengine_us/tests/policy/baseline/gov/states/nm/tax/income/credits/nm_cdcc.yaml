- name: Calculation of NM cdcc subtarcted from federal cdcc
  period: 2022
  input:
    people:
      head:
        age: 30
    tax_units:
      tax_unit:
        members: [head]
        nm_agi: 30_160
        cdcc: 2_000
        tax_unit_earned_income: 100
        nm_cdcc_max_amount: 1_200
    households:
      household:
        members: [head]
        state_code: NM
    spm_units:
      spm_unit:
        members: [head]
        tanf: 0
  output:
    nm_cdcc: 800

- name: Ineligible if recieve tanf
  period: 2022
  input:
    people:
      head:
        age: 30
    tax_units:
      tax_unit:
        members: [head]
        nm_agi: 30_160
        cdcc: 2_000
        tax_unit_earned_income: 100
        nm_cdcc_max_amount: 1_200
    households:
      household:
        members: [head]
        state_code: NM
    spm_units:
      spm_unit:
        members: [head]
        tanf: 1
  output:
    nm_cdcc: 0

- name: Ineligible if earned income is zero
  period: 2022
  input:
    people:
      head:
        age: 30
    tax_units:
      tax_unit:
        members: [head]
        nm_agi: 30_160
        cdcc: 2_000
        tax_unit_earned_income: 0
        nm_cdcc_max_amount: 1_200
    households:
      household:
        members: [head]
        state_code: NM
    spm_units:
      spm_unit:
        members: [head]
        tanf: 0
  output:
    nm_cdcc: 0

- name: Capped at the max amount
  period: 2022
  input:
    people:
      head:
        age: 30
    tax_units:
      tax_unit:
        members: [head]
        nm_agi: 30_160
        cdcc: 2_000
        tax_unit_earned_income: 1
        nm_cdcc_max_amount: 0
    households:
      household:
        members: [head]
        state_code: NM
    spm_units:
      spm_unit:
        members: [head]
        tanf: 0
  output:
    nm_cdcc: 0


- name: Capped at the max amount
  period: 2022
  input:
    people:
      head:
        age: 30
    tax_units:
      tax_unit:
        members: [head]
        nm_agi: 30_161
        cdcc: 2_000
        tax_unit_earned_income: 1
        nm_cdcc_max_amount: 0
    households:
      household:
        members: [head]
        state_code: NM
    spm_units:
      spm_unit:
        members: [head]
        tanf: 0
  output:
    nm_cdcc: 0

- name: Federal cap can not be 0
  period: 2022
  input:
    people:
      head:
        age: 30
    tax_units:
      tax_unit:
        members: [head]
        nm_agi: 30_160
        cdcc: 1_000
        tax_unit_earned_income: 1
        nm_cdcc_max_amount: 1_500
    households:
      household:
        members: [head]
        state_code: NM
    spm_units:
      spm_unit:
        members: [head]
        tanf: 0
  output:
    nm_cdcc: 0